<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <title>IcTiosCusco — Donación y Tienda</title>
    <meta name="description" content="Apoya a IcTiosCusco con donaciones o adquiere productos solidarios.">

    <link href="https://fonts.googleapis.com/css?family=Dosis:200,300,400,500,700" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css?family=Overpass:300,400,400i,600,700" rel="stylesheet">

    <link rel="stylesheet" href="css/open-iconic-bootstrap.min.css">
    <link rel="stylesheet" href="css/animate.css">
    <link rel="stylesheet" href="css/owl.carousel.min.css">
    <link rel="stylesheet" href="css/owl.theme.default.min.css">
    <link rel="stylesheet" href="css/magnific-popup.css">
    <link rel="stylesheet" href="css/aos.css">
    <link rel="stylesheet" href="css/ionicons.min.css">
    <link rel="stylesheet" href="css/bootstrap-datepicker.css">
    <link rel="stylesheet" href="css/jquery.timepicker.css">
    <link rel="stylesheet" href="css/flaticon.css">
    <link rel="stylesheet" href="css/icomoon.css">
    <link rel="stylesheet" href="css/style.css">

    <style>
      /* Estilos extra para donaciones/tienda, respetando la estética de tu web */
      .hero-wrap { background-position: center center; }
      .donation-card, .product-card {
        background: #fff;
        border-radius: 10px;
        padding: 18px;
        box-shadow: 0 8px 20px rgba(16,24,40,0.06);
        margin-bottom: 20px;
        height: 100%;
      }
      .donation-options { display:flex; gap:10px; flex-wrap:wrap; margin-top:12px; }
      .donation-option {
        padding:10px 14px;
        border-radius:8px;
        border:1px solid rgba(0,0,0,0.06);
        cursor:pointer;
        background:#fafafa;
        font-weight:600;
      }
      .donation-option.selected { background:#0d6efd; color:#fff; border-color: rgba(13,110,253,0.3); }
      .product-grid { display:grid; grid-template-columns: repeat(auto-fit,minmax(240px,1fr)); gap:18px; margin-top:18px; }
      .product-photo { width:100%; height:220px; object-fit:cover; border-radius:6px; border:1px solid #eee; }
      .product-title { font-size:1.05rem; margin:8px 0 6px; }
      .product-price { font-weight:700; color:#0d6efd; }
      .btn-pay { background:#ffc107; border:none; color:#111; padding:10px 14px; border-radius:8px; font-weight:700; }
      .btn-pay:hover { filter:brightness(.95); text-decoration:none; color:#111; }

      /* responsive */
      @media (max-width: 575.98px) {
        .product-photo { height:180px; }
      }
    </style>
  </head>
  <body>

  <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
    <div class="container">
      <a class="navbar-brand d-flex align-items-center" href="index.html">
        <img src="images/logo.png" alt="IcTiosCusco logo" style="height:56px;margin-right:12px;">
        <span>IcTiosCusco</span>
      </a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="oi oi-menu"></span> Menu
      </button>

      <div class="collapse navbar-collapse" id="ftco-nav">
        <ul class="navbar-nav ml-auto">
          <li class="nav-item"><a href="index.html" class="nav-link">Inicio</a></li>
          <li class="nav-item"><a href="about.html" class="nav-link">Quiénes somos</a></li>
          <li class="nav-item"><a href="causes.html" class="nav-link">Proyectos</a></li>
          <li class="nav-item active"><a href="donate.html" class="nav-link">Donación</a></li>
          <li class="nav-item"><a href="blog.html" class="nav-link">Noticias</a></li>
          <li class="nav-item"><a href="gallery.html" class="nav-link">Galería</a></li>
          <li class="nav-item"><a href="event.html" class="nav-link">Miembros</a></li>
          <li class="nav-item"><a href="contact.html" class="nav-link">Contacto</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <!-- END nav -->

  <div class="hero-wrap" style="background-image: url('images/bg_6.jpg');" data-stellar-background-ratio="0.5">
    <div class="overlay"></div>
    <div class="container">
      <div class="row no-gutters slider-text align-items-center justify-content-center">
        <div class="col-md-8 text-center">
          <p class="breadcrumbs"><span class="mr-2"><a href="index.html">Inicio</a></span> <span>Donación</span></p>
          <h1 class="mb-3">Apoya nuestro trabajo</h1>
          <p class="mb-4">Tu contribución ayuda a conservar especies endémicas y a financiar muestreos y talleres en comunidades altoandinas.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Sección de donaciones -->
  <section class="ftco-section bg-light">
    <div class="container">

      <div class="row">
        <!-- Donación directa -->
        <div class="col-md-6">
          <div class="donation-card">
            <h3>Donación directa</h3>
            <p>Elige un monto o coloca uno personalizado. Usamos PayPal para procesar pagos de forma segura.</p>

            <div class="donation-options" id="preset-options" role="toolbar" aria-label="Montos predefinidos">
              <div class="donation-option" data-amount="20">S/ 20</div>
              <div class="donation-option" data-amount="50">S/ 50</div>
              <div class="donation-option" data-amount="100">S/ 100</div>
              <div class="donation-option" data-amount="200">S/ 200</div>
            </div>

            <div style="margin-top:12px;">
              <label for="custom-amount" class="muted-small">Monto personalizado (Soles)</label>
              <input id="custom-amount" type="number" min="1" step="0.01" class="form-control" placeholder="Ej: 75.00" style="max-width:240px;">
            </div>

            <div style="margin-top:14px; display:flex; gap:10px; align-items:center;">
              <button id="donate-paypal" class="btn btn-pay" type="button">Donar con PayPal</button>
              <button id="donate-paypalme" class="btn btn-pay" style="background:#34b7f1;">Usar PayPal.me</button>
            </div>

            <p class="muted-small" style="margin-top:12px;">Recibirás un comprobante por email desde PayPal cuando completes el pago.</p>
          </div>
        </div>

        <!-- Tienda / merch -->
        <div class="col-md-6">
          <div class="donation-card">
            <h3>Tienda solidaria</h3>
            <p>Adquiere productos cuya recaudación apoya directamente las actividades de investigación y conservación.</p>

            <div class="product-grid" aria-live="polite">
              <!-- Polo -->
              <div class="product-card">
                <img src="images/polo_mockup.jpg" alt="Polo IcTiosCusco" class="product-photo">
                <div class="product-title">Polo IcTiosCusco</div>
                <div class="product-price">S/ 60.00</div>
                <p class="muted-small">Algodón, impresión del logo. Disponibles tallas S, M, L, XL.</p>
                <div style="margin-top:8px;">
                  <label class="muted-small">Talla:</label>
                  <select id="polo-size" class="form-control" style="max-width:140px; display:inline-block; margin-left:8px;">
                    <option>S</option><option>M</option><option>L</option><option>XL</option>
                  </select>
                </div>
                <div style="margin-top:12px;">
                  <button class="btn btn-pay" onclick="buyProduct('Polo IcTiosCusco', 60.00, { talla: document.getElementById('polo-size').value })">Pagar con PayPal</button>
                </div>
              </div>

              <!-- Tomatodo -->
              <div class="product-card">
                <img src="images/tomatodo_mockup.jpg" alt="Tomatodo IcTiosCusco" class="product-photo">
                <div class="product-title">Tomatodo IcTiosCusco</div>
                <div class="product-price">S/ 40.00</div>
                <p class="muted-small">Botella térmica de 500 ml con logo.</p>
                <div style="margin-top:12px;">
                  <button class="btn btn-pay" onclick="buyProduct('Tomatodo IcTiosCusco', 40.00)">Pagar con PayPal</button>
                </div>
              </div>

              <!-- Fotografía enmarcada -->
              <div class="product-card">
                <img src="images/photo_mockup.jpg" alt="Foto enmarcada IcTiosCusco" class="product-photo">
                <div class="product-title">Fotografía enmarcada</div>
                <div class="product-price">S/ 150.00</div>
                <p class="muted-small">Impresión 30x40cm, enmarcada — edición limitada.</p>
                <div style="margin-top:12px;">
                  <button class="btn btn-pay" onclick="buyProduct('Fotografía enmarcada IcTiosCusco', 150.00)">Pagar con PayPal</button>
                </div>
              </div>

            </div>
            <small class="muted-small">* Si quieres combinar varios productos contáctanos para coordinar envío y total (por ahora cada compra procesa por separado).</small>
          </div>
        </div>
      </div>

      <!-- Información adicional y formas offline -->
      <div class="row" style="margin-top:18px;">
        <div class="col-md-12">
          <div class="donation-card">
            <h4>¿Prefieres donar offline o coordinar envíos?</h4>
            <p>Escribe a <a href="mailto:ictioscusco@gmail.com">ictioscusco@gmail.com</a> o envíanos un mensaje por WhatsApp: <a href="https://wa.me/51969392189" target="_blank" rel="noopener">+51 969 392 189</a>. Podemos coordinar transferencia bancaria, recogida o envío de productos.</p>
          </div>
        </div>
      </div>

    </div>
  </section>

  <!-- Footer reducido (igual al resto del sitio) -->
  <footer class="ftco-footer ftco-section img">
    <div class="overlay"></div>
    <div class="container">
      <div class="row mb-5">
        <div class="col-md-3">
          <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2">Sobre IcTiosCusco</h2>
            <p>Grupo de investigación dedicado a la conservación y estudio de peces andinos (Orestias) en la región de Cusco.</p>
            <ul class="ftco-footer-social list-unstyled float-md-left float-lft mt-5">
              <li class="ftco-animate"><a href="https://www.facebook.com/ConGeniusRockie" target="_blank" rel="noopener"><span class="icon-facebook"></span></a></li>
              <li class="ftco-animate"><a href="https://www.instagram.com/ictioscusco?utm_source=ig_web_button_share_sheet&igsh=ZDNlZDc0MzIxNw==" target="_blank" rel="noopener"><span class="icon-instagram"></span></a></li>
            </ul>
          </div>
        </div>
        <div class="col-md-9">
          <div class="ftco-footer-widget mb-4">
            <h2 class="ftco-heading-2">Contacto</h2>
            <p><span class="icon icon-map-marker"></span> Cusco, Perú &nbsp; · &nbsp; <a href="tel:+51969392189">+51 969 392 189</a> &nbsp; · &nbsp; <a href="mailto:ictioscusco@gmail.com">ictioscusco@gmail.com</a></p>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-md-12 text-center">
          <p>Copyright &copy;<script>document.write(new Date().getFullYear());</script> IcTiosCusco. Todos los derechos reservados.</p>
        </div>
      </div>
    </div>
  </footer>

  <!-- loader (igual que en tu sitio) -->
  <div id="ftco-loader" class="show fullscreen" style="display:none;"></div>

  <!-- Scripts -->
  <script src="js/jquery.min.js"></script>
  <script src="js/jquery-migrate-3.0.1.min.js"></script>
  <script src="js/popper.min.js"></script>
  <script src="js/bootstrap.min.js"></script>
  <script src="js/jquery.easing.1.3.js"></script>
  <script src="js/jquery.waypoints.min.js"></script>
  <script src="js/jquery.stellar.min.js"></script>
  <script src="js/owl.carousel.min.js"></script>
  <script src="js/jquery.magnific-popup.min.js"></script>
  <script src="js/aos.js"></script>
  <script src="js/jquery.animateNumber.min.js"></script>
  <script src="js/bootstrap-datepicker.js"></script>
  <script src="js/jquery.timepicker.min.js"></script>
  <script src="js/scrollax.min.js"></script>
  <script src="js/google-map.js"></script>
  <script src="js/main.js"></script>

  <script>
    /****************************************************************
     *  CONFIG PayPal: reemplazado con tu correo (se colocó aquí)
     ****************************************************************/
    const PAYPAL_BUSINESS = 'ictioscusco@gmail.com'; // <-- TU CORREO integrado
    const PAYPAL_CURRENCY = 'PEN'; // 'PEN' o 'USD'
    const USE_SANDBOX = false; // true si quieres usar sandbox.paypal.com para pruebas
    const PAYPAL_ENDPOINT = USE_SANDBOX ? 'https://www.sandbox.paypal.com/cgi-bin/webscr' : 'https://www.paypal.com/cgi-bin/webscr';

    // PayPal.me (si lo dejas vacío, se usará el flujo estándar con el correo anterior)
    const PAYPAL_ME_USER = ''; // si usas paypal.me pon aquí tu usuario (ej: 'IcTiosCusco')

    // comportamiento visual de selección de monto
    document.addEventListener('DOMContentLoaded', function () {
      const opts = document.querySelectorAll('.donation-option');
      opts.forEach(o => {
        o.addEventListener('click', function () {
          opts.forEach(x => x.classList.remove('selected'));
          this.classList.add('selected');
          document.getElementById('custom-amount').value = this.getAttribute('data-amount');
        });
      });

      // botónes de donation
      document.getElementById('donate-paypal').addEventListener('click', function () {
        const val = Number(document.getElementById('custom-amount').value || 0);
        if (!val || val <= 0) { alert('Ingresa un monto válido mayor a 0.'); return; }
        openPaypalSingle(val.toFixed(2), 'Donación a IcTiosCusco');
      });

      // PayPal.me alternativa
      document.getElementById('donate-paypalme').addEventListener('click', function () {
        const val = Number(document.getElementById('custom-amount').value || 0);
        if (!val || val <= 0) { alert('Ingresa un monto válido mayor a 0.'); return; }
        if (!PAYPAL_ME_USER) {
          // si no definiste PayPal.me abrimos el flujo standard
          openPaypalSingle(val.toFixed(2), 'Donación a IcTiosCusco');
        } else {
          const url = `https://paypal.me/${PAYPAL_ME_USER}/${val.toFixed(2)}`;
          window.open(url, '_blank', 'noopener');
        }
      });
    });

    /**
     * Crea y envía un formulario POST a PayPal para un pago simple (Buy Now / Donation)
     * Abre en nueva pestaña para no sacar al usuario de la web
     */
    function openPaypalSingle(amount, itemName, extra = {}) {
      if (!PAYPAL_BUSINESS || PAYPAL_BUSINESS === 'REPLACE_WITH_PAYPAL_EMAIL') {
        alert('Por favor edita donate.html y asegúrate de que la constante PAYPAL_BUSINESS contenga tu correo PayPal Business.');
        return;
      }

      const form = document.createElement('form');
      form.action = PAYPAL_ENDPOINT;
      form.method = 'post';
      form.target = '_blank';
      form.style.display = 'none';

      // cmd _xclick => Buy Now. Para donación se podría usar cmd=_donations, pero _xclick permite detalle del artículo
      const inputs = {
        cmd: '_xclick',
        business: PAYPAL_BUSINESS,
        item_name: itemName,
        amount: amount,
        currency_code: PAYPAL_CURRENCY,
        // Opcional: personaliza aquí páginas de retorno si lo deseas
        // return: 'https://tusitio.org/gracias',
        // cancel_return: 'https://tusitio.org/cancelado'
      };

      // Agregar inputs base
      for (const k in inputs) {
        const i = document.createElement('input');
        i.type = 'hidden';
        i.name = k;
        i.value = inputs[k];
        form.appendChild(i);
      }

      // Agrega campos extra si vienen (p. ej. talla)
      if (extra && typeof extra === 'object') {
        for (const key in extra) {
          const i = document.createElement('input');
          i.type = 'hidden';
          // Para que PayPal muestre campos extra en la transacción podemos usar 'custom' o 'on0'/'os0'
          // Aquí añadimos como 'custom' (puedes procesarlo en IPN si lo configuras)
          if (key === 'talla') {
            // ejemplo: incluimos talla como opción en la descripción
            const inDesc = document.createElement('input');
            inDesc.type = 'hidden';
            inDesc.name = 'on0';
            inDesc.value = 'Talla';
            form.appendChild(inDesc);

            const inVal = document.createElement('input');
            inVal.type = 'hidden';
            inVal.name = 'os0';
            inVal.value = extra[key];
            form.appendChild(inVal);
          } else {
            i.name = key;
            i.value = extra[key];
            form.appendChild(i);
          }
        }
      }

      document.body.appendChild(form);
      form.submit();
      form.remove();
    }

    /**
     * Compra de producto: itemName, price en la moneda configurada.
     * extraObj puede contener { talla: 'M' } etc.
     */
    function buyProduct(itemName, price, extraObj) {
      // redondeo a 2 decimales
      openPaypalSingle(price.toFixed(2), itemName, extraObj || {});
    }
  </script>

  </body>
</html>
